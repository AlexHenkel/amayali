<template name="adminAgentsRequest">
    {{#if isInRole 'admin'}}
        <div class="dashhead">
            <div class="dashhead-titles">
                <h2 class="dashhead-title title-style c-green">{{_
                        "admin.agentRequests.title"}}</h2>
            </div>
            <div class="btn-toolbar dashhead-toolbar">
                <button type="button" class="btn btn-sm btn-pill btn-info" data-toggle="modal"
                        data-target="#new-modal">
                    {{_ "admin.general.add"}}
                </button>
            </div>
        </div>

        {{#if Template.subscriptionsReady}}
            <div class="table-responsive">
                <table class="table table-hover table-condensed" data-sort="table">
                    <thead>
                    <tr>
                        <th>{{_ "admin.general.viewMore"}}</th>
                        <th>{{_ "admin.agents.fullname"}}</th>
                        <th>{{_ "admin.general.email"}}</th>
                        <th>{{_ "admin.general.phone"}}</th>
                        <th>{{_ "admin.company.name"}}</th>
                        <th>{{_ "admin.company.type"}}</th>
                        <th>{{_ "admin.company.phone"}}</th>
                        <th>{{_ "admin.company.address"}}</th>
                        <th>{{_ "admin.company.zip"}}</th>
                        <th>{{_ "admin.agents.createdAt"}}</th>
                        <th>{{_ "admin.general.active"}}</th>
                        <th></th>
                        <th></th>
                    </tr>
                    </thead>
                    <tbody>
                    {{#each agents}}
                        {{> agentRequest}}
                    {{else}}
                        <tr>
                            {{> NoResults cols=11}}
                        </tr>
                    {{/each}}
                    </tbody>
                </table>
            </div>
        {{else}}
            {{> Loading}}
        {{/if}}

        {{> NewModal collection=agentCollection}}
        {{> EditModal collection=agentCollection editItem=editItem }}
        {{> AgentInfo}}
    {{else}}
        {{> Forbidden}}
    {{/if}}
</template>
